# AI 角色卡創作工具 - 工作紀錄

## 狀態說明
- 🔴 還沒做
- 🟡 做到一半
- 🟢 完成
- ⏸️ 需要延後

---

## 2025-01-29 工作紀錄

### 已完成的需求

#### 1. 匯出功能重新組織 🟢
**需求描述：**
- 將匯出按鈕分成兩行
- 第一行：文字格式（TXT、JSON、YAML、Markdown）
- 第二行：特殊格式（角色卡圖片、縮行 JSON、YAML 圖片、Markdown 圖片）

**完成時間：** 2025-01-29（之前的會話）
**狀態：** 🟢 完成

---

#### 2. 多 AI 提供商支援 🟢
**需求描述：**
- 新增 GPT API、CLAUDE API、DEEPSEEK API 支援
- 實現 AI 提供商選擇器
- 為每個提供商添加獨立的 API Key 配置
- 實現統一的 AI API 調用架構
- 新增平台格式支援檢查機制
- 動態顯示/隱藏不支援的功能按鈕

**完成內容：**
- ✅ 設置界面 HTML 修改
- ✅ CSS 樣式新增
- ✅ 設置管理邏輯修改
- ✅ 統一的 AI API 調用函數
- ✅ OpenAI API 實現
- ✅ Claude API 實現
- ✅ DeepSeek API 實現
- ✅ 平台格式支援檢查函數
- ✅ 現有 AI 生成調用修改
- ✅ 圖片導入功能修改
- ✅ 匯出函數修改
- ✅ 初始化時更新 UI

**完成時間：** 2025-01-29
**Commit:** 78092f5
**狀態：** 🟢 完成

---

#### 3. 配置管理系統重構 🟢
**需求描述：**
- 創建 .env 文件存放敏感資料
- 創建 config.js 供前端使用
- 提供範本文件
- 新增 .gitignore 保護敏感資料

**完成內容：**
- ✅ 創建 .env 文件
- ✅ 創建 .env.example 範本
- ✅ 創建 config.js 配置文件
- ✅ 創建 config.example.js 範本
- ✅ 新增 .gitignore
- ✅ 移除硬編碼的 Google OAuth 配置
- ✅ 配置 GitHub Personal Access Token

**完成時間：** 2025-01-29
**Commit:** 43420a0
**狀態：** 🟢 完成

---

#### 4. 簡潔版畫面改進 🟢
**需求描述：**
- 簡潔版模式下，背景故事、技能、屬性、對話風格區塊要連標題都隱藏
- 不是隱藏裡面的設定，是整個區塊標題都不顯示

**完成內容：**
- ✅ 為背景故事 section-header 添加 full-mode-only 類別
- ✅ 為戰鬥與生活技能 section-header 添加 full-mode-only 類別
- ✅ 為自訂屬性 section-header 添加 full-mode-only 類別
- ✅ 為對話風格 section-header 添加 full-mode-only 類別

**完成時間：** 2025-01-29
**狀態：** 🟢 完成

---

#### 5. 預覽和匯出功能改進 🟢
**需求描述：**
- 預覽區新增 [txt] 選項卡
- 匯出按鈕分成兩行：
  - 第一行：[匯出txt] [匯出JSON] [匯出YAML] [匯出Markdown]
  - 第二行：[匯出角色卡圖片] [匯出縮行JSON] [匯出YAML圖片] [匯出Markdown圖片]
- txt 格式：大標加小標的簡單格式
  ```
  性格特質 :
   -性格摘要 : 活潑,害羞
   -特質標籤 : 努力,迷糊
  ```
- 縮行JSON：將 JSON 全部縮成一行不換行

**完成內容：**
- ✅ 預覽區新增 TXT 選項卡
- ✅ 添加 TXT 預覽內容區 (previewTXT)
- ✅ 修改 switchPreviewTab 函數支援 txt
- ✅ 創建 convertToTXT 函數實現大標加小標格式
- ✅ 在 updateCodePreviews 中添加 TXT 預覽更新
- ✅ 修改匯出按鈕文字為「匯出 TXT」
- ✅ 確認 exportCompactJSON 已實現單行壓縮

**完成時間：** 2025-01-29
**狀態：** 🟢 完成

---

## 進行中的需求

<!-- 目前沒有進行中的需求 -->

---

## 待處理需求

<!-- 請在此處添加新的需求 -->

---

## 備註

- 所有 AI API 調用已統一使用 `callAIAPI()` 函數
- 平台支援矩陣：
  - Gemini: ❌ YAML, ❌ YAML 圖片, ✅ Vision
  - OpenAI: ✅ 全部支援
  - Claude: ✅ 全部支援
  - DeepSeek: ✅ YAML, ✅ YAML 圖片, ❌ Vision

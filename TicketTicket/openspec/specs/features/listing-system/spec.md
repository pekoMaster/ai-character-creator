# 票券刊登系統規格

## 概述
主辦方可以發布同行者徵求刊登，讓其他用戶申請加入。

---

## 功能需求

### F-LST-001: 建立刊登
- 系統 SHALL 提供刊登建立表單
- 表單 SHALL 包含以下必填欄位：
  - 活動名稱 (eventName)
  - 活動日期 (eventDate)
  - 場地 (venue)
  - 見面時間 (meetingTime)
  - 見面地點 (meetingLocation)
  - 原價日圓 (originalPriceJPY)
  - 要價台幣 (askingPriceTWD)
  - 總名額 (totalSlots)
  - 票券類型 (ticketType)
- 表單 MAY 包含選填欄位：
  - 描述 (description)

### F-LST-002: 價格驗證器
- 系統 SHALL 自動將日圓轉換為台幣（匯率 0.22）
- 系統 SHALL 計算最大允許要價 = 原價台幣 / 總名額
- 系統 SHALL 阻止要價超過最大允許值
- 系統 SHALL 即時顯示價格驗證結果

#### Scenario: 有效價格
- **Given** 原價 10,000 日圓，總名額 2 人
- **When** 主辦方輸入要價 1,000 台幣
- **Then** 系統 SHALL 接受此價格
- **And** 顯示「價格有效：符合分攤原則」

#### Scenario: 無效價格
- **Given** 原價 10,000 日圓，總名額 2 人
- **When** 主辦方輸入要價 1,500 台幣
- **Then** 系統 SHALL 拒絕此價格
- **And** 顯示「價格無效：超過最大允許值 ¥1,100」

### F-LST-003: 票券類型標籤
系統 SHALL 支援以下票券類型：

| 類型 | 標籤文字 | 說明 | 警告 |
|------|----------|------|------|
| must_enter_together | 需同行入場 | 主辦方持有主票 | 必須與主辦方一起入場 |
| overseas_ticket | 海外票券 | 需證件核對 | ⚠️ 需攜帶護照或相關證件 |
| separate_link | 獨立連結 | 各自獨立票券 | 無特殊要求 |

### F-LST-004: 刊登狀態管理
- 系統 SHALL 自動更新刊登狀態：
  - `open` → 有可用名額
  - `matched` → 名額已滿
  - `closed` → 主辦方手動關閉或活動已過期

### F-LST-005: 我的刊登
- 系統 SHALL 顯示用戶發布的所有刊登
- 系統 SHALL 按狀態分類顯示
- 系統 SHALL 顯示每個刊登的申請者數量

---

## UI 規格

### 刊登建立表單
```
┌─────────────────────────────────────┐
│ ← 發布同行徵求                        │
├─────────────────────────────────────┤
│                                     │
│ 活動名稱 *                           │
│ ┌─────────────────────────────────┐ │
│ │                                 │ │
│ └─────────────────────────────────┘ │
│                                     │
│ 活動日期 *            場地 *         │
│ ┌───────────────┐ ┌───────────────┐ │
│ │ 📅            │ │               │ │
│ └───────────────┘ └───────────────┘ │
│                                     │
│ 見面時間 *           見面地點 *       │
│ ┌───────────────┐ ┌───────────────┐ │
│ │ 🕐            │ │               │ │
│ └───────────────┘ └───────────────┘ │
│                                     │
│ ─────────── 價格設定 ───────────     │
│                                     │
│ 原價 (日圓) *        總名額 *        │
│ ┌───────────────┐ ┌───────────────┐ │
│ │ ¥             │ │ 👥            │ │
│ └───────────────┘ └───────────────┘ │
│                                     │
│ 💱 換算台幣: $2,200                  │
│ 📊 最大允許要價: $1,100/人           │
│                                     │
│ 要價 (台幣/人) *                     │
│ ┌─────────────────────────────────┐ │
│ │ $                               │ │
│ └─────────────────────────────────┘ │
│ ✅ 價格有效：符合分攤原則              │
│                                     │
│ 票券類型 *                           │
│ ○ 需同行入場 (主辦方持有主票)          │
│ ○ 海外票券 (需證件核對)               │
│ ○ 獨立連結 (各自獨立票券)             │
│                                     │
│ 描述 (選填)                          │
│ ┌─────────────────────────────────┐ │
│ │                                 │ │
│ │                                 │ │
│ └─────────────────────────────────┘ │
│                                     │
│ ┌─────────────────────────────────┐ │
│ │          發布刊登                 │ │
│ └─────────────────────────────────┘ │
│                                     │
└─────────────────────────────────────┘
```

### 刊登卡片
```
┌─────────────────────────────────────┐
│ [需同行入場]                         │
│                                     │
│ 🎵 YOASOBI Live 2025               │
│ 📅 2025/03/15                       │
│ 📍 東京巨蛋                          │
│                                     │
│ ┌─────────┐  ┌─────────┐           │
│ │ $1,000  │  │ 1/2 名額 │           │
│ │ /人     │  │ 可用     │           │
│ └─────────┘  └─────────┘           │
│                                     │
│ 👤 user123  ⭐ 4.8 (12)             │
│                                     │
│ ┌─────────────────────────────────┐ │
│ │         申請加入                  │ │
│ └─────────────────────────────────┘ │
└─────────────────────────────────────┘
```
